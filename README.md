#Divine providence

Общий префикс
`/api/v1/`

Для большинства запросов можно указать параметр `trello` чтобы синхронизировать действие с Трелло

---
REST
---

---
InterestType
---
Различные типы интересов

```json
{
  "id":1,
  "name":"Наименование типа интереса",
  "description":"Описание типа интереса",
  "trelloId":"Id соответствующего листа в трелло"
}
```

| Метод | Путь | Описание |
| ----  | ---- | ----  |
| GET  | /interestTypes/ | Получить список всех типов интересов  |
| GET  | /interestTypes/{id} | Получить данные типа интереса с id  |
| POST  | /interestTypes/ | Создать новый тип интереса  |
| PUT  | /interestTypes/{id} | Обновить тип интереса с id |
| DELETE  | /interestTypes/{id} | Удалить тип интереса с id  |

---
Interests
---
Интересы 

```json
{
    "name": "Наименование интереса",
    "img":"URL картинки",
    "source":"URL с источником для интереса",
    "season":0 ,
    "stage":0,
    "type": {
        "id":0 },                    
    "ord":1.444,
    "description":"Описание интереса",
    "trelloId": "Id карточки в трелло"
}
```
В GET запросе можно добавить параметры `type={id}&ord={pos}` для выборки интересов с типом интереса id и pos позиции в своем типе интереса

| Метод | Путь | Описание |
| ----  | ---- | ----  |
| GET | /interests/ | Список интересов в системе |
| GET | /interests/current | Текущие интересы по каждому типу |
| GET | /interests/{id} | Выводит информацию о конкретном интересе |
| POST | /interests/ | Добавляет новый интерес в список |
| PUT | /interests/{id} | Обновляет информацию о конкретном интересе |
| DELETE | /interests/{id} | Удаляет конкретный интерес |

---
Task
---
Задачи
```json
{
	"trelloId": "Id карточки в трелло ",
        "name": "Наименование задачи",
        "description" : "Описание задачи",
        "img" : "Url картинки",
        "urgent" : true,
        "important": true,
        "special":  {
        	"complete":"Delete"
        },
        "type": {
        "id":0},
        "dueDate": "01-01-2011T18:45:33:2204Z",
        "checklists" :[ {
        	"id":1,
        	"name":"Наименование чеклиста",
        	"trelloId":"ID чеклиста в трелло",
        	"checklistItems":[
        		{
        		"id":1,
        		"pos":123.4,
        		"duration":1.4,
	        	"trelloId":"ID чекитема в трелло",
	        	"name":"Наименование чекитема",
	        	"checked":true
        	}],

        }],
        "attribute":"Int",
        "duration":1.5
}
```
| Метод | Путь | Описание |
| ----  | ---- | ----  |
| GET | /tasks/ | Список задач в системе |
| GET | /tasks/{id} | Выводит информацию о конкретной задаче |
| POST | /tasks/ | Добавляет новую задачу в список |
| PUT | /tasks/{id} | Обновляет информацию о конкретной задаче |
| DELETE | /tasks/{id} | Удаляет конкретную задачу |

---
TaskType
---
Различные типы задач

```json
{
  "id":1,
  "name":"Наименование типа задачи",
  "description":"Описание типа задачи",
  "trelloId":"Id соответствующего листа в трелло"
}
```

| Метод | Путь | Описание |
| ----  | ---- | ----  |
| GET  | /taskTypes/ | Получить список всех типов задач  |
| GET  | /taskTypes/{id} | Получить данные типа задачи с id  |
| POST  | /taskTypes/ | Создать новый тип задачи  |
| PUT  | /taskTypes/{id} | Обновить тип задачи с id |
| DELETE  | /taskTypes/{id} | Удалить тип задачи с id  |

---
ACTIONS
---

---
Trello
---
Это не объекты, а операции которые выполняются с трелло
GET /trello/tasks - Список задач в трелло
GET /trello/interests - Список интересов в трелло

| Метод | Путь | Описание |
| ----  | ---- | ----  |
|*Заросы*||
| GET | /trello/tasks | Список задач из Трелло |
| GET | /trello/interests | Список интересов из Трелло |
|*Импорт*||
| POST | /trello/import | Импорт типов интересов и интересов из Трелло |
| POST | /trello/import/interestTypes | Импорт типов интересов из Трелло |
| POST | /trello/import/interestTypes/{id} | Обновление значений типа интереса из Трелло |
| POST | /trello/import/interests | Импорт интересов из Трелло |
| POST | /trello/import/interests/{id} | Обновление интереса из Трелло |
| POST | /trello/import/taskTypes | Импорт типов задач из Трелло |
| POST | /trello/import/taskTypes/{id} | Обновление значений типа задачи из Трелло |
| POST | /trello/import/tasks | Импорт задач из Трелло |
| POST | /trello/import/tasks/{id} | Обновление задачи из Трелло |
|*Экспорт*||
| POST | /trello/export | Экспорт типов интересов и интересов в Трелло |
| POST | /trello/export/interestTypes | Экспорт типов интересов в Трелло |
| POST | /trello/export/interestTypes/{id} | Обновление значений типа интереса в Трелло |
| POST | /trello/export/interests | Экспорт интересов в Трелло |
| POST | /trello/export/interests/{id} | Обновление интереса в Трелло |
| POST | /trello/export/taskTypes | Экспорт типов задач в Трелло |
| POST | /trello/export/taskTypes/{id} | Обновление значений типа задачи в Трелло |
| POST | /trello/export/tasks | Экспорт задачи в Трелло |
| POST | /trello/export/tasks/{id} | Обновление задачи в Трелло |

Habitica
---
Это не объекты, а операции которые выполняются с трелло

| Метод | Путь | Описание |
| ----  | ---- | ----  |
|*Заросы*||
| GET | /habitica/tasks | Список задач полученных из Хабитики|
| GET | /habitica/trello/tasks | Список задач полученных из хабитики, но данные берутся по данным треллоИд из внутренней базы|
|*Экспорт*||
| POST | /habitica/export/tasks | Экспортировать в хабитику все синхронизируемые таски |
| POST | /habitica/export/tasks/{id} | Экспортировать в хабитику конкретный таск |

Divine
---
Это не объекты, а операции которые предоставляет система

| Метод | Путь | Описание |
| ----  | ---- | ----  |
|*Логика*||
| POST | /divine/mix/{id} | Выбор нового случайного интереса для конкретного типа (id)|
| POST | /divine/complete/{id} | Перенос текущего интереса в список _*Выполнено*_ и выбор нового случайного интереса для конкретного типа (id)|
| POST | /divine/refer/{id} | Перенос текущего интереса в список _*Отложено*_ и выбор нового случайного интереса для конкретного типа (id)|
| POST | /divine/drop/{id} | Удаление текущего интереса и выбор нового случайного интереса для конкретного типа (id)|

---
HOOKS 
---

---
Trello Hook
---
Хук для отлова событий трелло

| Метод | Путь | Описание |
| ----  | ---- | ----  |
| POST  | /trello_hook/test | Ловит хуки с трелло  |

---
Habitica Hook
---
Хук для отлова событий хабитики

| Метод | Путь | Описание |
| ----  | ---- | ----  |
| POST  | /habitica_hook/test | Ловит хуки с хабитики  |



